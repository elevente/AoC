input = """...#...................#.......................#.......................................................#....................................
........................................................#...................................................................................
...............................#..........#..........................#.....#......................#.........................................
......#.................................................................................#.............................#..............#......
...........................................................................................................................................#
.................#........#.........................#...........#................#....................#......#..............................
........................................#................#....................................#..............................#..............
......................#.....................................................................................................................
..#.........#.......................#..............................#...............................................................#........
.............................................................#..................................................#...........................
...................#...........#...................#....................#...............................................#...................
...........................................#...................................#.....................#......#...............................
....#.........................................................................................................................#.............
........................................................................................#..........................#........................
...........#........................#..........................#............#...............................................................
.#...........................#..............................................................................................................
...............#..........................#................#.......................#.......................#................................
.....................#...........................................................................................#..........................
.........#.......................................#..................#..........#............#..........#..................#.................
.......................................................................................................................................#....
....................................#........................#..........................#...................................................
.....#.....................................#................................................................................................
...............#......................................#......................................................#....................#.........
....................#................................................................#.......#...............................#..............
...........#................................................................................................................................
.........................#......................#...........................................................................................
...#..............................#....................................#...........................#........................................
..................................................................#..................................................................#......
..........................................#..........#......................#............................................#..................
...............#......................................................................#..........................#........................#.
.....................#......................................................................................................................
..................................................#.............#.................................#.........................................
#..........................#.........................................................................................#......................
.....................................#......#................................#..............#...............#..................#............
........#............................................................................................#................................#.....
................................................................................................................#...........................
...............................#.......................#..................#................................................#................
..................................................................................................#...................#....................#
............................................................................................................................................
................#..........#....................#..................#..........................................#.............................
........#.................................#........................................#.....#.....................................#............
.......................#............................................................................................#.......................
.........................................................................................................................#.........#........
........................................................................................................#...................................
....#.......#...............#........................................#......................................................................
...........................................#.....#.............................................................#..............#.........#...
............................................................................................................................................
.....................#................#..................#....................#..............#..............................................
......#.....................................................................................................................................
...............#......................................................................................#.........................#...........
........................#...........................#..........#......................................................#.....................
.........................................#...........................#.................#......................#.............................
............................................................................................................................................
............................#.............................#.................................#..............................#...........#....
.#...........#......................#.........#...........................#.................................................................
............................................................................................................................................
.................#..................................................................#...........#.........#......................#..........
............................................................................................................................................
............................................................................................................................................
.........#...................#.................................#.............#..............................................................
...............#....................................................#...............................................#.....#.................
..........................................#..............................................#...........#.......#..............................
..#..................................................................................................................................#......
..........................................................................#.........#.......................................................
....................................#.........................#.........................................................#...................
...............................#................................................................#...........................................
...........#.............................................#............................................#............#........................
...........................................................................................................................#............#...
................#...........................#......................#..........#.......#.....................................................
#......................................................................................................................#............#.......
........................................................................#..................................#................................
..............................................................#...........................#.....#.........................................#.
......#.......#.....#.............#.........................................................................................................
.............................#.........#..................#.................................................................................
..........#.........................................................................................................#.......................
......................................................#................................................#...................#................
....#....................#.........................................#.........................................#..............................
....................................#.........#...............#...............#..............#...................................#..........
............................................................................................................................................
.............................#..................................................................................#.......#...................
........................................#................#...............#..................................................................
............................................................................................................................................
.............................................................#.........................#................#...................................
..........#......#............................#..................................#...............#..............................#.........#.
..................................#.................................................................................#.......................
....................................................#.......................#...............#.................#.......................#.....
.#...........#........................#..............................................#......................................................
................................................................#.......#..............................#....................................
..................................................................................................#...........................#.............
............................................................#............................................................#..............#...
......#.....................#......................................#...........#............................................................
.....................................................#.............................................................#.............#..........
.......................#.............#.....................................................................................................#
...........#.................................#............................#...........................#.....................................
.#...............................#....................................................................................#.....................
...................#...................................#..........................................#..............#..........................
.........................#.......................................#.............#............................................................
..........................................#.......#.....................#................#..................................#...............
...#.......................................................................................................#............................#...
............#.............................................#..................................#...................................#..........
............................#..........#.............................................................#.............#........................
......................#.....................................................................................................................
.............................................................................................................#..............................
....#........................................#.....................................#.......................................#................
.....................................................#..............#...................................................................#...
#....................................#....................#.......................................................................#.........
................................................................................................#...........................................
...........#.........#....................#...............................#.............#................................#..................
............................................................................................................................................
......#..........................#...........................#...........................................#...........#......................
.#.............#.........#.........................................#...........#.....#..................................................#...
.....................................#...................#.....................................................................#............
...........................................................................................#................................................
...................#................................................................................#..............#........................
...........................................#......#........................................................................................#
..#........................#..................................#.........................#...................................................
........#.............................#...............................................................................#.....................
...............................#........................#...............#..............................#....................................
.................................................................#..........................................#...............................
....................................................#........................#........#....................................#.........#......
....#.........#....................................................................................#.......................................#
......................#.....#.............................................................#.................................................
#......................................#......#....................................#...............................#.............#..........
.......................................................#..................................................#.................................
.........................................................................#......................#...........................................
...............................................................................#............................................#...............
....#........#................#...............................#.......................................................................#.....
.......................#.................................................................#..................#...............................
.....................................#.............#........................................................................................
...................................................................................................#......................................#.
..#.........................................................................................................................................
........#.................................#.............#...........#................#......................................................
...............................................................................................#............................#...............
.................#....................#.........................#..................................................................#........
....#.............................................#........................................................#........#.......................
.........................#.............................................#............................#.......................................
......................................................#.................................#................................................#..
.............................#...............#.................................#............................................................
.........#....................................................................................#........................#........#...........
..................#...........................................#.................................................#..........................."""

exampleInput = """...#......
.......#..
#.........
..........
......#...
.#........
.........#
..........
.......#..
#...#....."""

sky = input.split("\n")
sky = [[*x] for x in sky]

def findEmptyRows(sky):
    doubleRows = []
    for i, line in enumerate(sky):
        hasGalaxy = False
        for x in line:
            if x == "#":
                hasGalaxy = True
        if not(hasGalaxy):
            doubleRows.append(i)
    return doubleRows

def findEmptyCols(sky):
    skyTransposed = list(map(list, zip(*sky)))

    doubleCols = []
    for i, line in enumerate(skyTransposed):
        hasGalaxy = False
        for x in line:
            if x == "#":
                hasGalaxy = True
        if not(hasGalaxy):
            doubleCols.append(i)
    return doubleCols

def doubleEmptyRowsCols(sky):
    doubleRows = findEmptyRows(sky)
    doubleCols = findEmptyCols(sky)
    for i, row in enumerate(doubleRows):
        sky.insert(row + i, sky[row + i])

    skyTransposed = list(map(list, zip(*sky)))

    for i, row in enumerate(doubleCols):
        skyTransposed.insert(row + i, skyTransposed[row + i])

    sky = list(map(list, zip(*skyTransposed)))
    return sky

def findDistance(coord1, coord2):
    return abs(coord2[0] - coord1[0]) + abs(coord2[1] - coord1[1])

def findGalaxies(sky):
    galaxies = []
    for i, line in enumerate(sky):
        for j, x in enumerate(line):
            if x == "#":
                galaxies.append([i, j])
    return galaxies

def getTotalLength(galaxies):
    totalLength = 0
    for i, galaxy in enumerate(galaxies):
        for x in range(len(galaxies) - i):
            if x != 0:
                totalLength += findDistance(galaxy, galaxies[i + x])
    return totalLength

def getTotalLengthWithExpansion(galaxies, emptyRows, emptyCols, expansion):
    totalLength = 0
    for i, galaxy in enumerate(galaxies):
        for x in range(len(galaxies) - i):
            if x != 0:
                extraRows = 0
                extraCols = 0
                for emptyRow in emptyRows:
                    if galaxy[0] <= galaxies[i + x][0]:
                        range1 = galaxy[0]
                        range2 = galaxies[i + x][0]
                    else:
                        range1 = galaxies[i + x][0]
                        range2 = galaxy[0]
                    if emptyRow in range(range1, range2):
                        extraRows += expansion - 1
                for emptyCol in emptyCols:
                    if galaxy[1] <= galaxies[i + x][1]:
                        range1 = galaxy[1]
                        range2 = galaxies[i + x][1]
                    else:
                        range1 = galaxies[i + x][1]
                        range2 = galaxy[1]
                    if emptyCol in range(range1, range2):
                        extraCols += expansion - 1
                totalLength += findDistance(galaxy, galaxies[i + x]) + extraRows + extraCols
    return totalLength


def A(sky):
    for s in sky:
        print(s)
    sky = doubleEmptyRowsCols(sky)
    galaxies = findGalaxies(sky)
    totalLength = getTotalLength(galaxies)
    for s in sky:
        print(s)
    return totalLength

def B(sky):
    emptyRows = findEmptyRows(sky)
    emptyCols = findEmptyCols(sky)
    galaxies = findGalaxies(sky)
    totalLength = getTotalLengthWithExpansion(galaxies, emptyRows, emptyCols, 1000000)
    return totalLength

# print(A(sky))
print(B(sky))