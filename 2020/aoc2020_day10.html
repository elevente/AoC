<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>JS Bin</title>
</head>
<body>
  <pre>153
69
163
123
89
4
135
9
124
74
141
132
75
3
18
134
84
15
61
91
90
98
99
51
131
166
127
77
106
50
22
70
43
28
41
160
44
117
66
60
76
17
138
105
97
161
116
49
104
169
71
100
16
54
168
42
57
103
1
32
110
48
12
143
112
82
25
81
148
133
144
118
80
63
156
88
47
115
36
2
94
128
35
62
109
29
40
19
37
122
142
167
7
147
121
159
87
83
111
162
150
8
149</pre>
<script>
let joltages = document.querySelector("pre").textContent.split("\n").map(x => parseInt(x)).sort((a, b) => a - b);
joltages.unshift(0);
joltages.push(joltages[joltages.length - 1] + 3);
// let j1 = 0,
//     j2 = 0,
//     j3 = 0;
// for (let i = 1; i < joltages.length; i++) {
//   switch (joltages[i] - joltages[i - 1]) {
//     case 1:
//       j1++;
//       break;
//     case 2:
//       j2++;
//       break;
//     case 3:
//       j3++;
//       break;
//     default:
//       console.error("Compatibility problem!");
//       break;
//   }
// }
// console.log(`j1: ${j1}, j2: ${j2}, j3: ${j3}`);
// console.log(j1 * j3);
const cache = {};
const dp = (n) => {
    if (n === joltages.length - 1) {
      return 1;
    }
    if (n in cache) {
      return cache[n];
    }
    let ans = 0;
    for (let i = n + 1; i < joltages.length; i++) {
      if (joltages[i] - joltages[n] <= 3) {
        ans += dp(i);
      }
    }
    cache[n] = ans;
    return ans;
  };
  console.log(dp(0));
</script>
</body>
</html>